[{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\__tests__\\App.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\controllers\\DiagnosisController.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\controllers\\DiagnosisProcedureController.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1015,1018],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1015,1018],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1443,1446],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1443,1446],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":62,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2552,2555],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2552,2555],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\controllers\\PatientController.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[422,425],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[422,425],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1306,1309],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1306,1309],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\controllers\\ProcedureController.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\controllers\\RoleController.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\controllers\\ScheduleController.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[803,806],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[803,806],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1488,1491],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1488,1491],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\controllers\\SpecialistController.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[764,767],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[764,767],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1479,1482],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1479,1482],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\controllers\\UserController.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":72,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2128,2131],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2128,2131],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\models\\Diagnosis.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\models\\DiagnosisProcedure.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\models\\Patient.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\models\\Procedure.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\models\\ReportCore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\models\\Role.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\models\\Schedule.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\models\\Specialist.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\models\\User.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\models\\UserDoctor.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\services\\Diagnosis.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\services\\DiagnosisProcedure.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\services\\Patient.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\services\\Procedure.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\services\\Role.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\services\\Schedule.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\services\\Specialist.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\services\\User.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\services\\handleResponse.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\setupTests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\Dashboard\\DashboardWithFlags.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\Dashboard\\NewDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\Dashboard\\OldDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\Layout\\Layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\Login\\Login.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":39,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1377,1380],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1377,1380],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\Login\\LoginDemo.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1171,1174],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1171,1174],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\MedicalAppointment\\MedicalAppointment.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\PatientManagement\\Patient\\Patient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\PatientManagement\\Patient\\PatientEdit.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'diagnosisProcedureController' and 'procedureController'. Either include them or remove the dependency array.","line":100,"column":8,"nodeType":"ArrayExpression","endLine":100,"endColumn":24,"suggestions":[{"desc":"Update the dependencies array to be: [id, controller, diagnosisProcedureController, procedureController]","fix":{"range":[5003,5019],"text":"[id, controller, diagnosisProcedureController, procedureController]"}}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":219,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":219,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9544,9547],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9544,9547],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { Patient } from '../../../models/Patient';\r\nimport { PatientController } from '../../../controllers/PatientController';\r\nimport { DiagnosisProcedure, ProcedureDetails } from '../../../models/DiagnosisProcedure';\r\nimport { Diagnosis } from '../../../models/Diagnosis';\r\nimport { DiagnosisProcedureController } from '../../../controllers/DiagnosisProcedureController';\r\nimport { ProcedureController } from '../../../controllers/ProcedureController';\r\nimport { Procedure } from '../../../models/Procedure';\r\nimport { ReportCore } from '../../../models/ReportCore';\r\n\r\nconst PatientEdit: React.FC = () => {\r\n    const { id } = useParams<{ id: string }>();\r\n    const navigate = useNavigate();\r\n    const [controller] = useState(new PatientController());\r\n\r\n    // Form state\r\n    const [name, setName] = useState('');\r\n    const [birthDate, setBirthDate] = useState('');\r\n    const [gender, setGender] = useState<boolean>(true);\r\n    const [concerning, setConcerning] = useState('');\r\n    const [mail, setMail] = useState('');\r\n    const [dni, setDni] = useState('');\r\n    const [phone, setPhone] = useState('');\r\n    const [occupation, setOccupation] = useState('');\r\n    const [responsible, setResponsible] = useState('');\r\n    const [others, setOthers] = useState('');\r\n\r\n    const [report, setReport] = useState<ReportCore | null>(null);\r\n\r\n\r\n    const [hasInsurance, setHasInsurance] = useState(false);\r\n    const [hasHeartDisease, setHasHeartDisease] = useState(false);\r\n    const [hasBloodPressure, setHasBloodPressure] = useState(false);\r\n    const [hasBloodGlucose, setHasBloodGlucose] = useState(false);\r\n    const [hasDiabetes, setHasDiabetes] = useState(false);\r\n    const [hasAllergies, setHasAllergies] = useState(false);\r\n    const [hasEndocrineDisorders, setHasEndocrineDisorders] = useState(false);\r\n    const [hasNeurologicalDisorders, setHasNeurologicalDisorders] = useState(false);\r\n    const [diagnosis, setDiagnosis] = useState<Diagnosis[]>([]);\r\n    const [procedures, setProcedures] = useState<Procedure[]>([]);\r\n    const [idDiagnosis, setIdDiagnosis] = useState<string>(\"\");\r\n    const [idSubDiagnosis, setIdSubDiagnosis] = useState<string>(\"\")\r\n    const [diagnosisProcedures, setDiagnosticProcedures] = useState<DiagnosisProcedure[]>([]);\r\n    const [modifiedDiagnosisProcedures, setModifiedDiagnosisProcedures] = useState<Set<string>>(new Set());\r\n\r\n    const diagnosisProcedureController = new DiagnosisProcedureController();\r\n    const procedureController = new ProcedureController()\r\n\r\n\r\n\r\n    const [errors, setErrors] = useState<string[]>([]);\r\n\r\n\r\n    useEffect(() => {\r\n        if (id && id !== 'new') {\r\n            console.log(\"üöÄ ~ useEffect ~ id:\", id)\r\n            const storedDiagnosis = localStorage.getItem(\"diagnosis\");\r\n            if (storedDiagnosis) {\r\n                setDiagnosis(JSON.parse(storedDiagnosis));\r\n            }\r\n\r\n            diagnosisProcedureController.getDiagnosisProcedureByPatient(id).then(procedures => {\r\n                console.log(\"üöÄ ~ diagnosisProcedureController.getDiagnosisProcedureByPatient ~ procedures:\", procedures);\r\n                setDiagnosticProcedures(procedures);\r\n            }).catch((error) => {\r\n                console.error(\"Failed to fetch procedures:\", error);\r\n            });\r\n            procedureController.getProcedures().then(procedures => {\r\n                console.log(\"ÔøΩÔøΩÔøΩ ~ procedureController.getProcedures ~ procedures:\", procedures);\r\n                setProcedures(procedures);\r\n            }).catch((error) => {\r\n                console.error(\"Failed to fetch procedures:\", error);\r\n            })\r\n\r\n            controller.getPatient(id).then(patient => {\r\n                console.log(\"üöÄ ~ controller.getPatient ~ patient:\", patient);\r\n                setName(patient.Name);\r\n                setBirthDate(new Date(patient.BirthDate).toISOString().split('T')[0]);\r\n                setGender(patient.Gender);\r\n                setConcerning(patient.Concerning);\r\n                setDni(patient.DNI);\r\n                setMail(patient.Mail);\r\n                setPhone(patient.Phone);\r\n                setOccupation(patient.Occupation);\r\n                setResponsible(patient.Responsible);\r\n                setOthers(patient.Others);\r\n                setHasInsurance(patient.HasInsurance);\r\n                setHasHeartDisease(patient.HasHeartDisease);\r\n                setHasBloodPressure(patient.HasBloodPressure);\r\n                setHasBloodGlucose(patient.HasBloodGlucose);\r\n                setHasDiabetes(patient.HasDiabetes);\r\n                setHasAllergies(patient.HasAllergies);\r\n                setHasEndocrineDisorders(patient.HasEndocrineDisorders);\r\n                setHasNeurologicalDisorders(patient.HasNeurologicalDisorders);\r\n            }).catch(error => {\r\n                console.error(\"Failed to load patient:\", error);\r\n            });\r\n        }\r\n    }, [id, controller]);\r\n\r\n    const getReport = async (IDProcedure: string, IDPatient: string): Promise<ReportCore> => {\r\n        const dataReport = await diagnosisProcedureController.ReportCore(IDProcedure, IDPatient);\r\n        return dataReport;\r\n    }\r\n\r\n\r\n    const validateForm = (): boolean => {\r\n        const validationErrors: string[] = [];\r\n\r\n        if (!name.trim()) {\r\n            validationErrors.push(\"El nombre no puede estar vac√≠o.\");\r\n        }\r\n        if (!birthDate) {\r\n            validationErrors.push(\"La fecha de nacimiento es requerida.\");\r\n        }\r\n        if (!mail.trim()) {\r\n            validationErrors.push(\"El correo electr√≥nico es requerido.\");\r\n        }\r\n        if (!phone.trim()) validationErrors.push(\"El tel√©fono es requerido.\");\r\n        if (dni.length < 10 || dni.length > 13) errors.push(\"El DNI debe tener entre 10 y 13 d√≠gitos.\");\r\n\r\n\r\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n        if (mail && !emailRegex.test(mail)) {\r\n            validationErrors.push(\"El correo electr√≥nico no es v√°lido.\");\r\n        }\r\n\r\n        setErrors(validationErrors);\r\n        return validationErrors.length === 0;\r\n    };\r\n\r\n    const handleDiagnosisChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n        const selectedDiagnosis = e.target.value\r\n        setIdDiagnosis(selectedDiagnosis);\r\n    }\r\n    const handleSubDiagnosisChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n        const selectedSubDiagnosis = e.target.value\r\n        setIdSubDiagnosis(selectedSubDiagnosis);\r\n    }\r\n\r\n    const handleSaveDiagnostic = async () => {\r\n        if (id) {\r\n            const diagnosisProcedureSave: DiagnosisProcedure = {\r\n                IDPatient: id,\r\n                CodeDiagnosis: idDiagnosis,\r\n                CodeUnderDiagnosis: idSubDiagnosis,\r\n                Procedures: [],\r\n                ID: ''\r\n            };\r\n\r\n            const savedDiagnosisProcedure = await diagnosisProcedureController.addDiagnosisProcedure(diagnosisProcedureSave);\r\n\r\n            if (savedDiagnosisProcedure) {\r\n                console.log(\"üöÄ ~ handleSaveDiagnostic ~ savedDiagnosisProcedure:\", savedDiagnosisProcedure);\r\n\r\n                diagnosisProcedureSave.ID = savedDiagnosisProcedure; // Use the returned ID from the save operation\r\n\r\n                setDiagnosticProcedures(prevProcedures => [\r\n                    ...(Array.isArray(prevProcedures) ? prevProcedures : []), // Ensure it's an array\r\n                    diagnosisProcedureSave,\r\n                ]);\r\n            }\r\n        }\r\n    };\r\n\r\n    const deleteDiagnosis = (indexRemove: number, id: string) => {\r\n        setDiagnosticProcedures(prevProcedures => prevProcedures.filter((_, index) => index !== indexRemove));\r\n\r\n        diagnosisProcedureController.removeDiagnosisProcedure(id).then(() => {\r\n            console.log(\"ÔøΩÔøΩÔøΩ ~ deleteDiagnosis ~ deleted:\", id);\r\n        }).catch((error) => {\r\n            console.error(\"Failed to delete diagnosis:\", error);\r\n        });\r\n    }\r\n\r\n\r\n    const handleSave = async () => {\r\n        if (!validateForm()) return;\r\n\r\n        const patient: Patient = {\r\n            ID: id !== 'new' ? id || '' : '',\r\n            Name: name,\r\n            BirthDate: new Date(birthDate),\r\n            Gender: gender,\r\n            Concerning: concerning,\r\n            Mail: mail,\r\n            Phone: phone,\r\n            DNI: dni,\r\n            Occupation: occupation,\r\n            Responsible: responsible,\r\n            HasInsurance: hasInsurance,\r\n            HasHeartDisease: hasHeartDisease,\r\n            HasBloodPressure: hasBloodPressure,\r\n            HasBloodGlucose: hasBloodGlucose,\r\n            HasDiabetes: hasDiabetes,\r\n            HasAllergies: hasAllergies,\r\n            HasEndocrineDisorders: hasEndocrineDisorders,\r\n            HasNeurologicalDisorders: hasNeurologicalDisorders,\r\n            Others: others\r\n        };\r\n\r\n        try {\r\n            const savePromises = diagnosisProcedures\r\n                .filter(diagProc => diagProc.ID && modifiedDiagnosisProcedures.has(diagProc.ID))\r\n                .map(async diagProc => await diagnosisProcedureController.editDiagnosisProcedure(diagProc));\r\n\r\n            if (id !== 'new') {\r\n                await controller.editPatient(patient);\r\n            } else {\r\n                await controller.addPatient(patient);\r\n            }\r\n\r\n\r\n            await Promise.all(savePromises);\r\n\r\n            navigate('/patient-management');\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        } catch (error: any) {\r\n            errors.push(error.message as string);\r\n            setErrors(errors);\r\n            console.error(\"Failed to save patient or diagnosis procedures\", error);\r\n        }\r\n    };\r\n\r\n\r\n    const handleProcedureChange = (\r\n        e: React.ChangeEvent<HTMLInputElement>,\r\n        diagnosisIndex: number,\r\n        procedureIndex: number,\r\n        field: keyof ProcedureDetails\r\n    ) => {\r\n        const updatedDiagnosisProcedures = [...diagnosisProcedures];\r\n        const currentDiagnosis = updatedDiagnosisProcedures[diagnosisIndex];\r\n\r\n        if (field === 'StartAt' || field === 'EndAt') {\r\n            currentDiagnosis.Procedures[procedureIndex][field] =\r\n                e.target.value ? new Date(e.target.value) : null;\r\n        } else if (field === 'IsCompleted') {\r\n            currentDiagnosis.Procedures[procedureIndex][field] = e.target.checked;\r\n        } else {\r\n            currentDiagnosis.Procedures[procedureIndex][field] = e.target.value;\r\n        }\r\n\r\n        if (currentDiagnosis.ID) {\r\n            setModifiedDiagnosisProcedures(prev => new Set(prev).add(currentDiagnosis.ID!));\r\n        }\r\n\r\n        setDiagnosticProcedures(updatedDiagnosisProcedures);\r\n    };\r\n\r\n\r\n    const handleProcedureSelectChange = async (\r\n        e: React.ChangeEvent<HTMLSelectElement>,\r\n        diagnosisIndex: number,\r\n        procedureIndex: number,\r\n    ) => {\r\n        const updatedDiagnosisProcedures = [...diagnosisProcedures];\r\n        const currentDiagnosis = updatedDiagnosisProcedures[diagnosisIndex];\r\n\r\n        currentDiagnosis.Procedures[procedureIndex].IDProcedure = e.target.value;\r\n\r\n        if (currentDiagnosis.ID) {\r\n            setModifiedDiagnosisProcedures(prev => new Set(prev).add(currentDiagnosis.ID!));\r\n        }\r\n        if (id) {\r\n\r\n            const data = await getReport(e.target.value, id)\r\n            setReport(data)\r\n        }\r\n        setDiagnosticProcedures(updatedDiagnosisProcedures);\r\n    };\r\n\r\n\r\n    const handleAddProcedure = (diagnosisIndex: number) => {\r\n        const updatedDiagnosisProcedures = [...diagnosisProcedures];\r\n        const idDoctor = localStorage.getItem('id')\r\n\r\n        const newProcedure: ProcedureDetails = {\r\n            IDProcedure: '',\r\n            Description: '',\r\n            StartAt: null,\r\n            EndAt: null,\r\n            IsCompleted: false,\r\n            IDCreator: idDoctor || '',\r\n            IDUpdater: '',\r\n        };\r\n\r\n        updatedDiagnosisProcedures[diagnosisIndex].Procedures.push(newProcedure);\r\n        setDiagnosticProcedures(updatedDiagnosisProcedures);\r\n    };\r\n\r\n\r\n\r\n\r\n\r\n\r\n    const handleReturn = () => {\r\n        navigate('/patient-management');\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-6 max-w-4xl mx-auto bg-white shadow-lg rounded-lg\">\r\n            <h1 className=\"text-2xl font-bold mb-6\">\r\n                {id === 'new' ? 'Crear Paciente' : 'Editar Paciente'}\r\n            </h1>\r\n\r\n            {/* Show validation errors */}\r\n            {errors.length > 0 && (\r\n                <div className=\"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg\">\r\n                    <h2 className=\"font-bold\">Errores de validaci√≥n:</h2>\r\n                    <ul>\r\n                        {errors.map((error, index) => (\r\n                            <li key={index}>{error}</li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"space-y-6\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Nombre completo\"\r\n                        value={name}\r\n                        onChange={(e) => setName(e.target.value)}\r\n                        className=\"border rounded-lg p-2 w-full focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                    <input\r\n                        type=\"date\"\r\n                        value={birthDate}\r\n                        onChange={(e) => setBirthDate(e.target.value)}\r\n                        className=\"border rounded-lg p-2 w-full focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                    <select\r\n                        value={gender.toString()}\r\n                        onChange={(e) => setGender(e.target.value === 'true')}\r\n                        className=\"border rounded-lg p-2 w-full focus:ring-2 focus:ring-blue-500\"\r\n                    >\r\n                        <option value=\"true\">Masculino</option>\r\n                        <option value=\"false\">Femenino</option>\r\n                    </select>\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Motivo de consulta\"\r\n                        value={concerning}\r\n                        onChange={(e) => setConcerning(e.target.value)}\r\n                        className=\"border rounded-lg p-2 w-full focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"DNI\"\r\n                        value={dni}\r\n                        onChange={(e) => setDni(e.target.value)}\r\n                        className=\"border rounded-lg p-2 w-full focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                    <input\r\n                        type=\"email\"\r\n                        placeholder=\"Correo electr√≥nico\"\r\n                        value={mail}\r\n                        onChange={(e) => setMail(e.target.value)}\r\n                        className=\"border rounded-lg p-2 w-full focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                    <input\r\n                        type=\"tel\"\r\n                        placeholder=\"Tel√©fono\"\r\n                        value={phone}\r\n                        onChange={(e) => setPhone(e.target.value)}\r\n                        className=\"border rounded-lg p-2 w-full focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Ocupaci√≥n\"\r\n                        value={occupation}\r\n                        onChange={(e) => setOccupation(e.target.value)}\r\n                        className=\"border rounded-lg p-2 w-full focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Responsable\"\r\n                        value={responsible}\r\n                        onChange={(e) => setResponsible(e.target.value)}\r\n                        className=\"border rounded-lg p-2 w-full focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                </div>\r\n\r\n                {/* Medical Conditions */}\r\n                <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n                    <h2 className=\"text-lg font-semibold mb-4\">Condiciones M√©dicas</h2>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                        <label className=\"flex items-center space-x-2\">\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                checked={hasInsurance}\r\n                                onChange={(e) => setHasInsurance(e.target.checked)}\r\n                                className=\"rounded\"\r\n                            />\r\n                            <span>Seguro M√©dico</span>\r\n                        </label>\r\n                        <label className=\"flex items-center space-x-2\">\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                checked={hasHeartDisease}\r\n                                onChange={(e) => setHasHeartDisease(e.target.checked)}\r\n                                className=\"rounded\"\r\n                            />\r\n                            <span>Enfermedad Card√≠aca</span>\r\n                        </label>\r\n                        <label className=\"flex items-center space-x-2\">\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                checked={hasBloodPressure}\r\n                                onChange={(e) => setHasBloodPressure(e.target.checked)}\r\n                                className=\"rounded\"\r\n                            />\r\n                            <span>Presi√≥n Arterial</span>\r\n                        </label>\r\n                        <label className=\"flex items-center space-x-2\">\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                checked={hasBloodGlucose}\r\n                                onChange={(e) => setHasBloodGlucose(e.target.checked)}\r\n                                className=\"rounded\"\r\n                            />\r\n                            <span>Glucosa en Sangre</span>\r\n                        </label>\r\n                        <label className=\"flex items-center space-x-2\">\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                checked={hasDiabetes}\r\n                                onChange={(e) => setHasDiabetes(e.target.checked)}\r\n                                className=\"rounded\"\r\n                            />\r\n                            <span>Diabetes</span>\r\n                        </label>\r\n                        <label className=\"flex items-center space-x-2\">\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                checked={hasAllergies}\r\n                                onChange={(e) => setHasAllergies(e.target.checked)}\r\n                                className=\"rounded\"\r\n                            />\r\n                            <span>Alergias</span>\r\n                        </label>\r\n                        <label className=\"flex items-center space-x-2\">\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                checked={hasEndocrineDisorders}\r\n                                onChange={(e) => setHasEndocrineDisorders(e.target.checked)}\r\n                                className=\"rounded\"\r\n                            />\r\n                            <span>Trastornos Endocrinos</span>\r\n                        </label>\r\n                        <label className=\"flex items-center space-x-2\">\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                checked={hasNeurologicalDisorders}\r\n                                onChange={(e) => setHasNeurologicalDisorders(e.target.checked)}\r\n                                className=\"rounded\"\r\n                            />\r\n                            <span>Trastornos Neurol√≥gicos</span>\r\n                        </label>\r\n                    </div>\r\n                    <div className=\"mt-4\">\r\n                        <textarea\r\n                            placeholder=\"Otros detalles m√©dicos\"\r\n                            value={others}\r\n                            onChange={(e) => setOthers(e.target.value)}\r\n                            className=\"border rounded-lg p-2 w-full h-24 focus:ring-2 focus:ring-blue-500\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <h3>Agregar nuevo diagn√≥stico</h3>\r\n                    <select\r\n                        name=\"idDiagnosis\"\r\n                        value={idDiagnosis}\r\n                        onChange={handleDiagnosisChange}\r\n                        className=\"border rounded p-2 w-full\"\r\n                    >\r\n                        <option value=\"\">Seleccionar Diagn√≥stico</option>\r\n                        {diagnosis.map((diagnosis) => (\r\n                            <option key={diagnosis.Code} value={diagnosis.Code}>\r\n                                {diagnosis.Description.length > 50\r\n                                    ? diagnosis.Description.slice(0, 50) + \"...\"\r\n                                    : diagnosis.Description}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n\r\n                    {idDiagnosis !== \"\" && (\r\n                        <select\r\n                            name=\"SpecialistID\"\r\n                            value={idSubDiagnosis}\r\n                            onChange={handleSubDiagnosisChange}\r\n                            className=\"border rounded p-2 w-full\"\r\n                        >\r\n                            <option value=\"\">Seleccionar Subdiagn√≥stico</option>\r\n                            {\r\n                                diagnosis\r\n                                    .filter((d) => d.Code == idDiagnosis)\r\n                                    .map((diagnosis) => (\r\n                                        diagnosis.UnderDiagnosis?.map((underDiagnosis, index) => (\r\n                                            <option key={index} value={underDiagnosis.Code}>\r\n                                                {underDiagnosis.Description.length > 50\r\n                                                    ? underDiagnosis.Description.slice(0, 50) + \"...\"\r\n                                                    : underDiagnosis.Description}\r\n                                            </option>\r\n                                        ))\r\n                                    ))\r\n                            }\r\n                        </select>\r\n                    )}\r\n\r\n                    {idDiagnosis != \"\" && idDiagnosis != \"\" && <button\r\n                        onClick={handleSaveDiagnostic}\r\n                        className=\"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300\"\r\n                    >\r\n                        Agregar Diagn√≥stico\r\n                    </button>}\r\n\r\n                </div>\r\n\r\n                <div>\r\n                    {report && (\r\n                        <div>\r\n                            <table style={{ borderCollapse: 'collapse', width: '100%', marginBottom: '20px' }}>\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th style={{ border: '1px solid #ccc', padding: '10px', textAlign: 'left' }}>Descripci√≥n</th>\r\n                                        <th style={{ border: '1px solid #ccc', padding: '10px', textAlign: 'left' }}>Valor</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr>\r\n                                        <td style={{ border: '1px solid #ccc', padding: '10px' }}>C√≥digo m√°s com√∫n</td>\r\n                                        <td style={{ border: '1px solid #ccc', padding: '10px' }}>\r\n                                            {\r\n                                                diagnosis\r\n                                                    .find(diag => diag.Code === report.CodeUnderDiagnosis.slice(0, 3))\r\n                                                    ?.UnderDiagnosis.find(under => under.Code === report.CodeUnderDiagnosis)?.Description || \"N/A\"\r\n                                            }\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td style={{ border: '1px solid #ccc', padding: '10px' }}>Tiempo Promedio</td>\r\n                                        <td style={{ border: '1px solid #ccc', padding: '10px' }}>{report.AverageProcedureTime}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td style={{ border: '1px solid #ccc', padding: '10px' }}>Cumplimiento de citas del paciente</td>\r\n                                        <td style={{ border: '1px solid #ccc', padding: '10px' }}>{report.AverageAppointmen}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td style={{ border: '1px solid #ccc', padding: '10px' }}>Promedio de g√©nero</td>\r\n                                        <td style={{ border: '1px solid #ccc', padding: '10px' }}>{report.AveragePatientGender}% hombres</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td style={{ border: '1px solid #ccc', padding: '10px' }}>Promedio de edad</td>\r\n                                        <td style={{ border: '1px solid #ccc', padding: '10px' }}>{report.AveragePatientAge}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td style={{ border: '1px solid #ccc', padding: '10px' }}>Total de procedimientos</td>\r\n                                        <td style={{ border: '1px solid #ccc', padding: '10px' }}>{report.TotalProcedureCount}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td style={{ border: '1px solid #ccc', padding: '10px' }}>Promedio de tratamientos exitosos</td>\r\n                                        <td style={{ border: '1px solid #ccc', padding: '10px' }}>{report.SuccessfulTreatments}</td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n\r\n                            <h3>El/Los paciente/s m√°s comunes son:</h3>\r\n                            {report?.SimilarPatients?.map((patient, index) => (\r\n                                <div key={index} style={{ marginBottom: '10px' }}>\r\n                                    <p>\r\n                                        El paciente con g√©nero {patient.Patient.Gender === true ? 'Masculino' : 'Femenino'}, nacido el{' '}\r\n                                        {patient.Patient.BirthDate.toString()}.\r\n                                    </p>\r\n                                    <p>El procedimiento fue {patient.IsSuccessful ? 'exitoso' : 'fracasado'}.</p>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n\r\n                </div>\r\n\r\n                <div className=\"p-6 bg-gray-50 \">\r\n                    <div className=\"max-w-4xl mx-auto space-y-6\">\r\n                        {diagnosisProcedures && diagnosisProcedures.map((d, index) => (\r\n                            <div\r\n                                key={index}\r\n                                className=\"bg-white shadow-md rounded-lg p-6 border-l-4 border-blue-500\"\r\n                            >\r\n                                <h3 className=\"text-xl font-bold text-gray-800 mb-4\">\r\n                                    Diagn√≥stico {index + 1}\r\n                                </h3>\r\n\r\n                                <div className=\"grid grid-cols-2 gap-4 mb-4\">\r\n                                    <div>\r\n\r\n                                        <p className=\"text-sm text-gray-600\">\r\n                                            <span className=\"font-semibold\">C√≥digo Diagn√≥stico:</span>\r\n                                            {diagnosis.find(diagnosisItem => diagnosisItem.Code === d.CodeDiagnosis)?.Description || \"N/A\"}\r\n                                            {d.CodeDiagnosis}\r\n                                        </p>\r\n                                        <p className=\"text-sm text-gray-600\">\r\n                                            <span className=\"font-semibold\">C√≥digo Subdiagn√≥stico:</span>\r\n                                            {\r\n                                                diagnosis\r\n                                                    .find(diagnosisItem => diagnosisItem.Code === d.CodeDiagnosis)\r\n                                                    ?.UnderDiagnosis?.find(subdiagnosis => subdiagnosis.Code === d.CodeUnderDiagnosis)?.Description || \"N/A\"\r\n                                            }\r\n                                            {d.CodeUnderDiagnosis}\r\n                                        </p>\r\n\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"mb-4\">\r\n                                    <h4 className=\"text-lg font-semibold text-gray-700 mb-3\">Procedimientos</h4>\r\n\r\n                                    {d.Procedures.length > 0 ? (\r\n                                        <div className=\"space-y-4\">\r\n                                            {d.Procedures.map((procedure, procedureIndex) => (\r\n                                                <div\r\n                                                    key={procedureIndex}\r\n                                                    className=\"bg-gray-100 p-4 rounded-md\"\r\n                                                >\r\n                                                    <div className=\"grid grid-cols-2 gap-4\">\r\n                                                        <div>\r\n\r\n\r\n                                                            <select\r\n                                                                name=\"Procedimiento\"\r\n                                                                value={procedure.IDProcedure}\r\n                                                                onChange={(e) => handleProcedureSelectChange(e, index, procedureIndex)}\r\n                                                                className=\"border rounded p-2 w-full\"\r\n                                                            >\r\n                                                                <option value=\"\">Seleccionar Diagn√≥stico</option>\r\n                                                                {procedures.map((procedure) => (\r\n                                                                    <option key={procedure.ID} value={procedure.ID}>\r\n                                                                        {procedure.Description.length > 30\r\n                                                                            ? procedure.Description.slice(0, 30) + \"...\"\r\n                                                                            : procedure.Description}\r\n                                                                    </option>\r\n                                                                ))}\r\n                                                            </select>\r\n                                                        </div>\r\n                                                        <div>\r\n                                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                                                Descripci√≥n\r\n                                                                <input\r\n                                                                    type=\"text\"\r\n                                                                    value={procedure.Description}\r\n                                                                    onChange={(e) => handleProcedureChange(e, index, procedureIndex, 'Description')}\r\n                                                                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200\"\r\n                                                                />\r\n                                                            </label>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n\r\n                                                    {procedures.find((pro) => pro.ID == diagnosisProcedures[index].Procedures[procedureIndex].IDProcedure)?.IsTimeType && <div className=\"grid grid-cols-2 gap-4 mt-4\">\r\n                                                        <div>\r\n                                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                                                Fecha de Inicio\r\n                                                                <input\r\n                                                                    type=\"datetime-local\"\r\n                                                                    value={\r\n                                                                        typeof procedure.StartAt === 'string'\r\n                                                                            ? procedure.StartAt.slice(0, 16)\r\n                                                                            : procedure.StartAt instanceof Date\r\n                                                                                ? procedure.StartAt.toISOString().slice(0, 16)\r\n                                                                                : ''\r\n                                                                    }\r\n                                                                    onChange={(e) => handleProcedureChange(e, index, procedureIndex, 'StartAt')}\r\n                                                                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200\"\r\n                                                                />\r\n                                                            </label>\r\n                                                        </div>\r\n                                                        <div>\r\n                                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                                                Fecha de Fin\r\n                                                                <input\r\n                                                                    type=\"datetime-local\"\r\n                                                                    value={\r\n                                                                        typeof procedure.EndAt === 'string'\r\n                                                                            ? procedure.EndAt.slice(0, 16)\r\n                                                                            : procedure.EndAt instanceof Date\r\n                                                                                ? procedure.EndAt.toISOString().slice(0, 16)\r\n                                                                                : ''\r\n                                                                    }\r\n                                                                    onChange={(e) => handleProcedureChange(e, index, procedureIndex, 'EndAt')}\r\n                                                                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200\"\r\n                                                                />\r\n                                                            </label>\r\n                                                        </div>\r\n\r\n                                                    </div>}\r\n\r\n                                                    {!procedures.find((pro) => pro.ID == diagnosisProcedures[index].Procedures[procedureIndex].IDProcedure)?.IsTimeType && <div className=\"mt-4\">\r\n                                                        <label className=\"inline-flex items-center\">\r\n                                                            <input\r\n                                                                type=\"checkbox\"\r\n                                                                checked={procedure.IsCompleted}\r\n                                                                onChange={(e) => handleProcedureChange(e, index, procedureIndex, 'IsCompleted')}\r\n                                                                className=\"rounded text-blue-600 focus:ring-blue-500\"\r\n                                                            />\r\n                                                            <span className=\"ml-2 text-sm text-gray-700\">Completado</span>\r\n                                                        </label>\r\n                                                    </div>}\r\n                                                </div>\r\n                                            ))}\r\n\r\n                                        </div>\r\n\r\n                                    ) : (\r\n                                        <p className=\"text-gray-500 italic\">No hay procedimientos registrados.</p>\r\n                                    )}\r\n                                </div>\r\n\r\n                                <div className=\"mt-4\">\r\n                                    <button\r\n                                        onClick={() => handleAddProcedure(index)}\r\n                                        className=\"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-md transition duration-300 ease-in-out\"\r\n                                    >\r\n                                        A√±adir Procedimiento\r\n                                    </button>{\r\n                                        d.ID && typeof d.ID == 'string' ? <button\r\n                                            className=\"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-md transition duration-300 ease-in-out\"\r\n\r\n                                            onClick={() => deleteDiagnosis(index, d.ID)}>\r\n                                            Eliminar Diagn√≥stico\r\n                                        </button> : \"\"\r\n\r\n                                    }\r\n\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n\r\n\r\n                <div className=\"flex justify-between items-center\">\r\n                    <button\r\n                        onClick={handleReturn}\r\n                        className=\"bg-gray-100 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 transition duration-300\"\r\n                    >\r\n                        Regresar\r\n                    </button>\r\n                    <button\r\n                        onClick={handleSave}\r\n                        className=\"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300\"\r\n                    >\r\n                        Guardar\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PatientEdit;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\PatientManagement\\Patient\\PatientList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\ProtectedRoute.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'diagnosisController'. Either include it or remove the dependency array.","line":59,"column":8,"nodeType":"ArrayExpression","endLine":59,"endColumn":31,"suggestions":[{"desc":"Update the dependencies array to be: [diagnosisController, token, userController]","fix":{"range":[2387,2410],"text":"[diagnosisController, token, userController]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport {jwtDecode} from 'jwt-decode'; // Make sure to import the correct version\r\nimport { UserController } from '../controllers/UserController';\r\nimport { DiagnosisController } from '../controllers/DiagnosisController';\r\nimport { Diagnosis } from '../models/Diagnosis';\r\n\r\ninterface ProtectedRouteProps {\r\n    children: JSX.Element;\r\n}\r\n\r\ninterface Token {\r\n    ID: string;\r\n    exp: number;\r\n}\r\n\r\nconst ProtectedRoute: React.FC<ProtectedRouteProps> = ({ children }) => {\r\n    const [isAuthenticated, setIsAuthenticated] = useState<boolean | null>(null); // To track if the user is authenticated\r\n    const [loading, setLoading] = useState<boolean>(true); // To handle loading state\r\n    const token = localStorage.getItem('token');\r\n    const userController = new UserController();\r\n    const diagnosisController = new DiagnosisController();\r\n\r\n    useEffect(() => {\r\n        const checkAuth = async () => {\r\n            if (!token) {\r\n                setIsAuthenticated(false);\r\n                setLoading(false);\r\n                return;\r\n            }\r\n            try {\r\n                const dataToken: Token = jwtDecode(token);\r\n                console.log(\"üöÄ ~ dataToken:\", dataToken);\r\n\r\n                // Check token expiration and ID\r\n                if (dataToken?.exp && dataToken.exp * 1000 < Date.now() && dataToken?.ID) {\r\n                    setIsAuthenticated(false);\r\n                    setLoading(false);\r\n                    return;\r\n                } else {\r\n                    const user = await userController.GetUserWithRoleAndSpecialty(dataToken.ID);\r\n                    const diagnosis:Diagnosis[] = await diagnosisController.getDiagnosis();\r\n\r\n                    localStorage.setItem('role', JSON.stringify(user.role.Permissions)) \r\n                    localStorage.setItem(\"id\", JSON.stringify(user.user.ID))\r\n                    localStorage.setItem(\"diagnosis\", JSON.stringify(diagnosis))\r\n                    \r\n                    setIsAuthenticated(true);\r\n                    setLoading(false);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error decoding token\", error);\r\n                setIsAuthenticated(false);\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        checkAuth();\r\n    }, [token, userController]);\r\n\r\n    if (loading) {\r\n        return <div>Loading...</div>; // Optionally, show a loading state\r\n    }\r\n\r\n    if (!isAuthenticated) {\r\n        return <Navigate to=\"/\" replace />;\r\n    }\r\n\r\n    return children;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\ScheduleDoctor\\ScheduleDoctor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\ScheduleDoctor\\SheduleDoctorList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\Schedule\\Schedule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\Sidebar\\Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\UserManagement\\Specialist\\Specialist.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\UserManagement\\Specialist\\SpecialistEdit.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'controller'. Either include it or remove the dependency array.","line":30,"column":8,"nodeType":"ArrayExpression","endLine":30,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [controller, id]","fix":{"range":[1367,1371],"text":"[controller, id]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2850,2853],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2850,2853],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\UserManagement\\Specialist\\SpecialistList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\UserManagement\\UserManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\UserManagement\\User\\User.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\UserManagement\\User\\UserEdit.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'roleController', 'specialistController', and 'userController'. Either include them or remove the dependency array.","line":88,"column":6,"nodeType":"ArrayExpression","endLine":88,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [id, roleController, specialistController, userController]","fix":{"range":[3030,3034],"text":"[id, roleController, specialistController, userController]"}}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":177,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":177,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6012,6015],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6012,6015],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { RoleController } from \"../../../controllers/RoleController\";\r\nimport { SpecialistController } from \"../../../controllers/SpecialistController\";\r\nimport { UserController } from '../../../controllers/UserController';\r\nimport { Role } from \"../../../models/Role\";\r\nimport { Specialist } from \"../../../models/Specialist\";\r\nimport { User } from \"../../../models/User\";\r\n\r\ninterface UserFormState extends Omit<User, 'Role' | 'Specialist' | 'BirthDate'> {\r\n  RoleID: string;\r\n  SpecialistID: string;\r\n  BirthDate: string;\r\n}\r\n\r\nconst UserEdit: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  const { id } = useParams<{ id: string }>();\r\n\r\n  const [user, setUser] = useState<UserFormState>({\r\n    ID: \"\",\r\n    Email: \"\",\r\n    Name: \"\",\r\n    Phone: \"\",\r\n    Address: \"\",\r\n    Gender: \"\",\r\n    DNI: \"\",\r\n    Password: \"\",\r\n    BirthDate: new Date().toISOString().split('T')[0],\r\n    RoleID: \"\",\r\n    SpecialistID: \"\",\r\n    HasAccess: false,\r\n  });\r\n\r\n  const [roles, setRoles] = useState<Role[]>([]);\r\n  const [specialists, setSpecialists] = useState<Specialist[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string>(\"\");\r\n  const [validationErrors, setValidationErrors] = useState<string[]>([]);\r\n\r\n  const roleController = new RoleController();\r\n  const specialistController = new SpecialistController();\r\n  const userController = new UserController();\r\n\r\n  useEffect(() => {\r\n    const initializeData = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        const [fetchedRoles, fetchedSpecialists] = await Promise.all([\r\n          roleController.getRoles(),\r\n          specialistController.getSpecialists()\r\n        ]);\r\n\r\n        setRoles(fetchedRoles);\r\n        setSpecialists(fetchedSpecialists);\r\n\r\n        if (id && id !== 'new') {\r\n          const userData = await userController.getUser(id);\r\n          console.log(\"üöÄ ~ initializeData ~ userData:\", userData)\r\n          const birthDate = userData.BirthDate instanceof Date \r\n            ? userData.BirthDate.toISOString().split('T')[0]\r\n            : new Date(userData.BirthDate).toISOString().split('T')[0];\r\n\r\n          setUser({\r\n            ID: userData.ID,\r\n            Email: userData.Email,\r\n            Name: userData.Name,\r\n            Phone: userData.Phone,\r\n            Address: userData.Address,\r\n            Gender: userData.Gender,\r\n            DNI: userData.DNI,\r\n            Password: userData.Password,             \r\n            BirthDate: birthDate,\r\n            RoleID: userData.RoleID,\r\n            SpecialistID: userData.SpecialistID,\r\n            HasAccess: userData.HasAccess,\r\n          });\r\n        }\r\n      } catch (error) {\r\n        setError(\"Error al cargar los datos. Por favor, int√©ntalo de nuevo.\");\r\n        console.error(\"Initialization error:\", error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    initializeData();\r\n  }, [id]);\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    const { name, value } = e.target as HTMLInputElement; \r\n    const inputType = (e.target as HTMLInputElement).type;\r\n    \r\n    setUser(prev => ({\r\n      ...prev,\r\n      [name]: inputType === \"checkbox\" ? (e.target as HTMLInputElement).checked : value\r\n    }));\r\n  }\r\n\r\n  const handleRoleChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    const selectedRoleID = e.target.value;\r\n    setUser(prev => ({\r\n      ...prev,\r\n      RoleID: selectedRoleID\r\n    }));\r\n  };\r\n\r\n  const handleSpecialistChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    const selectedSpecialistID = e.target.value;\r\n    setUser(prev => ({\r\n      ...prev,\r\n      SpecialistID: selectedSpecialistID\r\n    }));\r\n  };\r\n  \r\n  const phoneRegex = /^\\+?[0-9\\s\\-()]{7,15}$/; \r\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n\r\n\r\n  const validateFields = () => {\r\n    const errors: string[] = [];\r\n    if (!user.Name) errors.push(\"El nombre es requerido.\");\r\n    if (!user.Email) {\r\n        errors.push(\"El correo electr√≥nico es requerido.\");\r\n    } else if (!emailRegex.test(user.Email)) {\r\n        errors.push(\"El formato del correo electr√≥nico es inv√°lido.\");\r\n    }\r\n    if (!user.Phone) {\r\n        errors.push(\"El tel√©fono es requerido.\");\r\n    } else if (!phoneRegex.test(user.Phone)) {\r\n        errors.push(\"El formato del tel√©fono es inv√°lido.\");\r\n    }\r\n    if (!user.Address) errors.push(\"La direcci√≥n es requerida.\");\r\n    if (!user.Gender) errors.push(\"El g√©nero es requerido.\");\r\n    if (!user.DNI) errors.push(\"El DNI es requerido.\");\r\n    if (user.DNI.length < 10 || user.DNI.length > 13) errors.push(\"El DNI debe tener entre 10 y 13 d√≠gitos.\");\r\n    if (!user.Password) errors.push(\"La contrase√±a es requerida.\");\r\n    if (!user.BirthDate) errors.push(\"La fecha de nacimiento es requerida.\");\r\n    if (!user.RoleID) errors.push(\"El rol es requerido.\");\r\n    if (!user.SpecialistID) errors.push(\"El especialista es requerido.\");\r\n    return errors;\r\n};\r\n\r\n\r\n  const handleSave = async () => {\r\n    const errors = validateFields();\r\n    if (errors.length > 0) {\r\n      setValidationErrors(errors);\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setIsLoading(true);\r\n      const userToSave: User = {\r\n        ID: user.ID,\r\n        Email: user.Email,\r\n        Name: user.Name,\r\n        Phone: user.Phone,\r\n        Address: user.Address,\r\n        Gender: user.Gender,\r\n        DNI: user.DNI,\r\n        Password: user.Password, \r\n        BirthDate: new Date(user.BirthDate),\r\n        RoleID: user.RoleID,\r\n        SpecialistID: user.SpecialistID,\r\n        HasAccess: user.HasAccess,\r\n      };\r\n\r\n      if(id === 'new') {\r\n        await userController.addUser(userToSave);\r\n      } else {\r\n        await userController.editUser(userToSave);\r\n      }\r\n      \r\n      navigate(\"/user-management\");\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    } catch (error:any) {\r\n        errors.push(error.message);\r\n      setValidationErrors(errors); \r\n      return\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <div className=\"p-4\">Cargando...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"p-4 text-red-500\">{error}</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-4 max-w-4xl mx-auto\">\r\n      <h1 className=\"text-2xl font-bold mb-6\">\r\n        {id === 'new' ? \"Crear Usuario\" : \"Editar Usuario\"}\r\n      </h1>\r\n\r\n      {validationErrors.length > 0 && (\r\n        <div className=\"mb-4 p-2 border border-red-500 text-red-500\">\r\n          {validationErrors.map((error, index) => (\r\n            <div key={index}>{error}</div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"Name\"\r\n          placeholder=\"Nombre\"\r\n          value={user.Name}\r\n          onChange={handleInputChange}\r\n          className=\"border rounded p-2 w-full\"\r\n        />\r\n        <input\r\n          type=\"email\"\r\n          name=\"Email\"\r\n          placeholder=\"Correo Electr√≥nico\"\r\n          value={user.Email}\r\n          onChange={handleInputChange}\r\n          className=\"border rounded p-2 w-full\"\r\n        />\r\n        <input\r\n          type=\"tel\"\r\n          name=\"Phone\"\r\n          placeholder=\"Tel√©fono\"\r\n          value={user.Phone}\r\n          onChange={handleInputChange}\r\n          className=\"border rounded p-2 w-full\"\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          name=\"Address\"\r\n          placeholder=\"Direcci√≥n\"\r\n          value={user.Address}\r\n          onChange={handleInputChange}\r\n          className=\"border rounded p-2 w-full\"\r\n        />\r\n        <select\r\n          name=\"Gender\"\r\n          value={user.Gender}\r\n          onChange={handleInputChange}\r\n          className=\"border rounded p-2 w-full\"\r\n        >\r\n          <option value=\"\">Seleccionar G√©nero</option>\r\n          <option value=\"Masculino\">Masculino</option>\r\n          <option value=\"Femenino\">Femenino</option>\r\n          <option value=\"Otro\">Otro</option>\r\n        </select>\r\n        <input\r\n          type=\"number\"\r\n          name=\"DNI\"\r\n          placeholder=\"DNI\"\r\n          value={user.DNI}\r\n          onChange={handleInputChange}\r\n          className=\"border rounded p-2 w-full\"\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          name=\"Password\"\r\n          placeholder=\"Contrase√±a\"\r\n          value={user.Password}\r\n          onChange={handleInputChange}\r\n          className=\"border rounded p-2 w-full\"\r\n        />\r\n        <input\r\n          type=\"date\"\r\n          name=\"BirthDate\"\r\n          value={user.BirthDate}\r\n          onChange={handleInputChange}\r\n          className=\"border rounded p-2 w-full\"\r\n        />\r\n        <select\r\n          name=\"RoleID\"\r\n          value={user.RoleID}\r\n          onChange={handleRoleChange}\r\n          className=\"border rounded p-2 w-full\"\r\n        >\r\n          <option value=\"\">Seleccionar rol</option>\r\n          {roles.map((role) => (\r\n            <option key={role.ID} value={role.ID}>\r\n              {role.Name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <select\r\n          name=\"SpecialistID\"\r\n          value={user.SpecialistID}\r\n          onChange={handleSpecialistChange}\r\n          className=\"border rounded p-2 w-full\"\r\n        >\r\n          <option value=\"\">Seleccionar Especialista</option>\r\n          {specialists.map((specialist) => (\r\n            <option key={specialist.ID} value={specialist.ID}>\r\n              {specialist.Specialization}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <div className=\"flex items-center\">\r\n          <input\r\n            type=\"checkbox\"\r\n            name=\"HasAccess\"\r\n            checked={user.HasAccess}\r\n            onChange={handleInputChange}\r\n            className=\"mr-2\"\r\n          />\r\n          <label>¬øTiene Acceso?</label>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex gap-4\">\r\n        <button\r\n          onClick={handleSave}\r\n          disabled={isLoading}\r\n          className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:bg-blue-300\"\r\n        >\r\n          {isLoading ? \"Guardando...\" : \"Guardar\"}\r\n        </button>\r\n        <button\r\n          onClick={() => navigate(\"/user-management\")}\r\n          className=\"px-4 py-2 rounded border hover:bg-gray-100\"\r\n        >\r\n          Cancelar\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserEdit; \r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\views\\UserManagement\\User\\UserList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\isaac\\Documents\\Procesos de Software\\frontendMedicalRecord2\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]